
EV3RT App Development as Eclipse Project

■ 目的
　　Toppers Project で公開している EV3RTはコマンドラインベースで開発することを想定しているので，これを Eclipse上での開発に対応させる．
　　Eclipse上での以下の操作に対応する．
    - Build
    - Debug
    - コード補完
    - モジュールダウンロード（できれば）

■ 対応環境
  ev3rt-beta6-2-release.zip
　　cygwin 2.4.1-1
  gcc-arm-none-eabi-4_8-2014q3-20140805-win32
  
　　※ Cygwinへのパス (C:\cygwin64\bin:C:\cygwin64\usr\local\bin) を環境変数Pathの先頭に入れること
　　正確には %SYSTEMROOT%へのパスより前に入れる必要がある（Makefile内で呼び出すfindなどにCygwinのfindを使うため）

■ 利用方法
　　1. 以下のディレクトリをEclipseのWorkspaceにプロジェクトとしてインポートする。
　　　　　インポートすると、プロジェクト EV3RT が読み込まれる。
　　　　　hrp2/sdk/workspace
　　2. Windows -> Show View -> Make Target を開く。
　　3. ビルドしたいモジュールごとに app=ev3way-cpp のようなビルドターゲットを作成する。
　　4. ビルド対象のビルドターゲットを右クリックした "Build Target" を実行する。
　　5. プロジェクト EV3RT を右クリックして Index -> Rebuild を実行する。

　　※ プロジェクト名を変更した場合はプロジェクトのプロパティ -> C/C++ Build -> build directory を変更しておくこと。

■ 注意事項
　　・標準のビルド（アイコンの金づちマーク）はターゲットなしのビルドになるため、この環境では正しくビルドできない。
　　・RTOSのタスク名はビルド時に生成されるファイルに定義が記述されているため、あるモジュールのビルド時には別のモジュールのソースファイルは名前解決に失敗する（Eclipseのエディタ上はエラー表示される）。
　　・同様の理由でビルド後にIndexをRebuildしないとエディタ上ではエラーが表示される。

■ 主な修正点
　　・sdk/workspaceをEclipseのプロジェクトとして設定
    In Eclipse Project Properties
    - Cross GCC toolchains
    - This project NOT generate Makefiles automatically.
    - Build directory is the same as project directory.
    - C/C++ General -> Path and Symbol -> Includes -> GNU C / GNU C++
　　・Cygwinのファイルパスに対応するために Makefile を修正。
    - convert $(PWD) in default, it is Windows Path format) to Cygwin Path
      format. Use valuable name: ${PROJECTHOME}


　　/*
　　　　Eclipseからmakeは Windows Shell 経由で呼び出される。
　　　　makeの中はcygwinで動いているので path は cygwin 形式 (/c/cygdrive/...)
    makeから呼び出される (shell xxx ...)はWindows Shell経由で呼び出される。
         特にINCLUDEを作っている find が問題になるので、システム環境変数の Path で
    WindowsのfindよりCygwinのfindバイナリを先に見つけられるように設定する。
    mkimageを /usr/local/bin に入れている場合は C:\cygwin64/usr/local/bin も必要．
  */

